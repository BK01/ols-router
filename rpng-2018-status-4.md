# RouterNG, Status Report #4
Date: 2018-08-14<br>
Sprint: 2<br>
Prepared by: Graeme Leeming, *Refractions Research Inc.*
## Overview
The first sprint has now been completed. The basic framework was extended to model a simple version of (precalculated) intersection costs and to support time independent turn restrictions. Further testing has assisted with refining the approach, and also to identify a few bugs.
A team meeting was held last week to review overall progress and significantly reorder priorities. A decision was made to implement features related to MoT road restrictions in the short term, which had previously not been in scope for the contract this year. This means deviating from the original plan to research and model supplementary (non-trivial) features. Both additional effort and a deferral of originally planned features until next fiscal will be required to achieve this new goal. One benefit of the change is that the effects of restriction support will be observed much sooner. Another positive outcome will be a much earlier opportunity to demonstrate to MoT that some of their requirements can be effectively integrated into the router.
Planning is underway for the second sprint (5 weeks), which will run until September 14. Initial tasks will involve finishing the intersection cost model, then extending the existing turn restriction concept to support time-dependencies. Stemming from a discussion with Michael Ross today, we determined it is also worth spending time to add key visualization layers to the UI (e.g. traffic light locations, turn restrictions) to help facilitate testing. So once those tasks are complete, we will then shift gears to implement the first of the top priority MoT feature: hard road restrictions.
## Details
### Time Independent Turn Restrictions
The concept of a CSV cost and restrictions input file has been implemented. As previously noted, it is flexible enough to also support extended restrictions such as U-turn cases. A router pre-processing step now generates the file from ITN turn restriction codes. Eventually this input will be extended to support a custom restriction input file with an identical structure to the processed one.
The current release of the software demonstrates routes adhering to time independent turn restriction limitations. This functionality can be turned on and off in the UI. Test routes compared with Google have so far shown fairly close comparison, with most of the differences stemming from data deficiencies either in ITN or Google.
Status Report #4 Page 2 of 3
### Intersection Turn Costs
Turn costs are now modelled in the router code. For the time being, they are based on specific end-node traffic impactors (e.g. yield, stop sign, light, roundabout) with delays associated via three groupings of ITN road classes. Like the turn restriction data, these fixed costs are calculated and allocated ahead of time with help from the router pre-processing application.
For our initial implementation logic, the turn cost delays are simply applied based on the travel direction road class and impactor type. In the future, the turn cost concept may be extended to take into account the class of the cross street. Also, double line crossing scenarios will need to be better modelled to avoid applying a double or triple delay traversing through an intersection. The concept of logical intersections (e.g. pre-computing groupings) or some other techniques are worth considering for future enhancements. There are also alternative intersection modelling techniques that can be considered, e.g. https://www.gislounge.com/turn-restrictions-simplified/.
Even with small delay costs and the current simple modelling approach, the effects are definitely observable. Overall accuracy will ultimately be based on the completeness and correctness of end-node traffic impactor data in ITN, the complexity of the matrix used to apply the costs, and the sophistication of the techniques used to model the delays. In its basic form the current implementation has at least demonstrated the cost delay feature in action.
### Testing
Testing has continued with both a custom set of hand-picked routes as well as the site-based generated cases. The framework was extended to allow operation in criteria=fastest mode (instead of just shortest). We have switched over to using Google as a reference for comparison now that the features being implemented extend beyond what is modelled in production.
Performance still remains fast, and accuracy is increasingly dependent on the quality of data and modelling approaches in our code as well as in Google. DataBC is also performing independent testing against the latest release. Another approach could involve creating a framework to establish “turtle” walks that would create routes in particular (or even random) patterns. These results could then be compared against Google and OSM/GraphHopper to provide additional confidence in our algorithms.
the project. For now he is available full time, but that level of effort is not going to be sustainable in the fall and spring. At this time it is not clear how both of these concerns will impact what we are ultimately capable of completing by the end of fiscal.
